(function(){function f(a){null!=a&&(a.classList.remove("active"),localStorage.removeItem("panel-section-active"))}function g(a){for(var b=h(),c=0;c<b.length;c++)if(b[c]==a)return c}function h(){for(var a=document.getElementsByClassName("section-list")[0].childNodes,b=[],c=0;c<a.length;c++)1==a[c].nodeType&&b.push(a[c]);return b}function e(){var a=new XMLHttpRequest;a.open("GET",d+"/backend/backend_update/version/",!0);a.onreadystatechange=function(){4==a.readyState&&200==a.status&&1==JSON.parse(a.responseText).status&&
(document.getElementsByClassName("_i-notification")[0].classList.add("new-notices"),document.getElementsByClassName("_new-version")[0].classList.add("show"))};a.send(null)}document.getElementsByClassName||(document.getElementsByClassName=function(a){return this.querySelectorAll("."+a)},Element.prototype.getElementsByClassName=document.getElementsByClassName);var d=document.getElementById("website_url").value,l=document.getElementsByClassName("seotoaster-panel")[0],k=document.getElementsByClassName("section-list")[0];
document.getElementsByClassName("show-hide");null!=localStorage.getItem("panel-section-active")&&h()[localStorage.getItem("panel-section-active")].classList.add("active");window.addEventListener("load",function(){e()});k.addEventListener("click",function(a){var b=a.target.parentNode,c=k.querySelector(".section.active");if(-1==a.target.className.indexOf("section-btn")||-1!=a.target.className.indexOf("no-open-section"))return!1;b.classList.contains("active")?f(b):(f(c),localStorage.setItem("panel-section-active",
g(b)),b.classList.add("active"))});document.addEventListener("click",function(a){var b=a.target;for(a=[];b;)a.push(b),b=b.parentNode;for(b=0;b<a.length-2;b++)if(a[b].classList.contains("seotoaster-panel"))return!1;f(k.querySelector(".section.active"))});document.getElementsByClassName("show-hide")[0].addEventListener("click",function(a){a.target.classList.toggle("_i-panel-hide");a.target.classList.toggle("_i-panel-show");l.classList.toggle("p-show");l.classList.toggle("p-hide")});var m=document.getElementById("del-this-page");
m&&m.addEventListener("click",function(a){var b=document.getElementById("del-page-id").value;if(0==a.target.getAttribute("data-cid")){if(a=new XMLHttpRequest,a.open("GET",d+"backend/backend_page/checkforsubpages/pid/"+b,!1),a.send(null),200==a.status){if(a.responseText.subpages)return smoke.alert(a.responseText.message,function(a){},{classname:"warning"}),!1;showDelConfirm()}}else showDelConfirm()});document.getElementById("edit404").addEventListener("click",function(){var a=new XMLHttpRequest;a.open("GET",
d+"/backend/backend_page/edit404page",!1);a.send(null);200==a.status&&(a=JSON.parse(a.responseText),a.notFoundUrl?window.location.href=a.notFoundUrl:smoke.alert(document.getElementsByClassName("edit404-msg")[0].innerHTML,{classname:"errors"}))});document.getElementById("cleancache").addEventListener("click",function(a){a.target.classList.add("run");var b=new XMLHttpRequest;b.open("GET",d+"/backend/backend_content/cleancache/",!1);b.send(null);var c=JSON.parse(b.responseText);200==b.status?setTimeout(function(){a.target.classList.remove("run");
showMessage(c.responseText,!1,2500)},2E3):setTimeout(function(){a.target.classList.remove("run");showMessage(c.responseText,!0)},2E3)});showTooltip(".tooltip-admin-panel","info","left")})();
function showDelConfirm(){var f=$("#del-page-id").val(),g=$("#website_url").val();smoke.confirm("Are you sure you want to delete this page?",function(h){h&&$.ajax({url:g+"backend/backend_page/delete/id/"+f,type:"DELETE",dataType:"json",beforeSend:function(){smoke.signal("Removing page...",3E4)},success:function(e){hideSpinner();e.error?smoke.alert(e.responseText.body,{classname:"error"}):top.location.href=g}})},{classname:"error",ok:"Yes",cancel:"No"})}
function showTooltip(f,g,h){$(f+"[title]").tooltip();var e="",d="";switch(h){case "right":e="left+10 center";d="right center";break;case "left":e="right-10 center";d="left center";break;case "top":e="center bottom-10";d="center top";break;case "bottom":e="center top+10",d="center bottom"}$(f+"[title]").tooltip("option",{tooltipClass:g,position:{my:e,at:d,using:function(e,d){$(this).css(e);$("<span>").addClass("arrow").addClass(d.vertical).addClass(d.horizontal).appendTo(this)}}})};
